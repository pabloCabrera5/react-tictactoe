(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){},36:function(e,t,n){e.exports=n(47)},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),c=n.n(o),i=(n(27),n(2)),l=n(3),s=n(5),u=n(4),h=n(6),p=n(19),m=n(16),f="Player 1 - Xs ",v="Player 2 - 0s ",d=[["-","-","-"],["-","-","-"],["-","-","-"]],b={fetching:!1,finished:!1,error:null},E="http://api.myjson.com/bins",y={name:"default",uri:"https://api.myjson.com/bins/e8cdl"};var g=[{name:"default",uri:"https://api.myjson.com/bins/s7ikp"},{name:"grillo",uri:"https://api.myjson.com/bins/81s15"}],O=0;function k(e,t){t||(t=O);var n={name:t,uri:e};g.push(n),O++}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(console.log("gameReducer"),t.type){case"PLAY_POSITION":var n=JSON.parse(JSON.stringify(e)),a=t.turn===f?"X":"0";return n[t.x][t.y]=a,n;case"RESET":return[["-","-","-"],["-","-","-"],["-","-","-"]];case"FETCH_STATE_SUCESS":return t.state.values;default:return e}};var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(console.log("turnReducer"),t.type){case"PLAY_POSITION":return t.turn===f?v:f;case"RESET":return f;case"FETCH_STATE_SUCESS":return t.state.turn;default:return e}};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(console.log(),t.type){case"PLAY_POSITION":return t.movements+1;case"RESET":return 0;default:return e}},_=n(22),T=n(10);var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(console.log("playerReducer"),t.type){case"NEW_PLAYER":return t.player_name;case"FETCH_STATE_SUCESS":return t.state.player_name?t.state.player_name:"";default:return e}},A=Object(T.a)(),x=Object(m.c)({turn:S,values:j,movements:C,fetch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FETCH_STATE_BEGIN":return(e=JSON.parse(JSON.stringify(t))).fetching=!0,e;case"FETCH_STATE_SUCESS":return(e=JSON.parse(JSON.stringify(t))).fetching=!1,e.finish=!0,e;case"FETCH_STATE_FAILURE":return(e=JSON.parse(JSON.stringify(t))).fetching=!1,e.error=n.error,e;default:return t}},player_name:w,router:Object(_.b)(A)}),G=n(12),N=n.n(G),I=n(17);function P(){return console.log("resetGameeeee"),{type:"RESET"}}function R(e){return{type:"NEW_PLAYER",player_name:e}}function L(e){return F.apply(this,arguments)}function F(){return(F=Object(I.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return console.log("Success:",JSON.stringify(e)),e}).catch(function(e){throw console.error("Error:",e),new Error("Couldnt save the game")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){var t=!1;return g.every(function(n,a){return n.name!==e||(t=!0,!1)}),t}function J(e){if(!e.ok)throw console.log("ERROR: ".concat(e.statusText)),Error(e.statusText);return e}var H=n(32),U=n(18),W=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"Welcome to TICTATOE"),r.a.createElement("nav",null,r.a.createElement(U.b,{exact:!0,to:"/"}," HOME"),r.a.createElement(U.b,{exact:!0,to:"/new"}," NEW GAME"),r.a.createElement(U.b,{exact:!0,to:"/continue"}," CONTINUE"),r.a.createElement(U.b,{exact:!0,to:"/savedGames",pep:"pepep"}," SAVED GAMES")))}}]),t}(r.a.Component),M=n(13),Y=n(7),q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h3",null,this.props.welcome_text,r.a.createElement("br",null),this.props.textt))}}]),t}(r.a.Component),B={height:"100px",width:"100px"},V=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).squareClick=n.squareClick.bind(Object(Y.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"squareClick",value:function(e,t,n,a){"-"===n&&this.props.boardClick(e,t)}},{key:"render",value:function(){var e=this,t="mybutton ";return t+="-"===this.props.value?"clickable":"no_clickable",r.a.createElement("button",{className:t,onClick:function(){return e.squareClick(e.props.rowIndex,e.props.columnIndex,e.props.value,e.props.board)},style:B},this.props.value)}}]),t}(r.a.Component),X=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).boardClick=n.boardClick.bind(Object(Y.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"boardClick",value:function(e,t){this.props.appClick(e,t)}},{key:"render",value:function(){var e=this,t=this.props.values.map(function(t,n){var a=t.map(function(t,a){return r.a.createElement(V,{boardClick:e.boardClick,board:e.props.values,rowIndex:n,columnIndex:a,key:""+n+a,value:t})});return r.a.createElement("div",{key:"row"+n},a)});return r.a.createElement("div",null,t)}}]),t}(r.a.Component),$=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={player_name:"",name_game:""},n.appClick=n.appClick.bind(Object(Y.a)(n)),n.reset=n.reset.bind(Object(Y.a)(n)),n.handlePlayerInputChange=n.handlePlayerInputChange.bind(Object(Y.a)(n)),n.handlePlayerSubmit=n.handlePlayerSubmit.bind(Object(Y.a)(n)),n.saveGame=n.saveGame.bind(Object(Y.a)(n)),n.handleGameSubmit=n.handleGameSubmit.bind(Object(Y.a)(n)),n.handleGameName=n.handleGameName.bind(Object(Y.a)(n)),console.log("APPPP"),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"appClick",value:function(e,t){var n,a,r,o;console.log("click"),this.props.dispatch((n=e,a=t,r=this.props.turn,o=this.props.movements,console.log("playPosition"),{type:"PLAY_POSITION",x:n,y:a,turn:r,movements:o}))}},{key:"componentDidMount",value:function(){if(console.log(this.props.router),console.log(this.props.uri),console.log("*******"),this.props.continue){var e=this.props.router.split("/")[2]||void 0;console.log(e),this.props.dispatch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.uri;return console.log(e),function(t){return t({type:"FETCH_STATE_BEGIN"}),fetch(e).then(J).then(function(e){return e.json()}).then(function(e){return t(function(e){return{type:"FETCH_STATE_SUCESS",state:e}}(e))}).catch(function(e){return console.log(e),t(function(e){return{type:"FETCH_STATE_FAILURE",error:e}}(e))})}}(function(e){var t;return g.every(function(n,a){return n.name!==e||(t=n.uri,!1)}),t}(e)))}else this.props.dispatch(R("")),this.props.dispatch(P())}},{key:"handlePlayerSubmit",value:function(e){console.log("Submiting value. "+this.state.player_name),e.preventDefault(),this.props.dispatch(R(this.state.player_name))}},{key:"handlePlayerInputChange",value:function(e){this.setState({player_name:e.target.value})}},{key:"handleGameSubmit",value:function(){var e=Object(I.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Submiting value. "+this.state.name_game),t.preventDefault(),D(this.state.name_game)){e.next=8;break}return e.next=5,this.saveGame();case 5:alert("Your game have been saved"),e.next=9;break;case 8:alert("Sorry the choosen name already exist. Please type another");case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleGameName",value:function(e){this.setState({name_game:e.target.value})}},{key:"reset",value:function(){console.log("Reeeeeeeeset"),this.props.dispatch(P())}},{key:"saveGame",value:function(){var e=Object(I.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={values:this.props.values,turn:this.props.turn,player_name:this.state.player_name||this.props.player_name},console.log(t),e.next=4,L(t);case 4:n=e.sent,console.log(n),a=n.uri,r=this.state.name_game,y={name:r,uri:a},k(n.uri,this.state.name_game);case 8:case"end":return e.stop()}var a,r},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(console.log("in render :",this.state,this.props.player_name),this.props.fetch.fetching)return r.a.createElement("div",{className:"loader"});if(!1===this.props.fetch.fetching&&this.props.fetch.error)return console.log(this.props.fetch.error),r.a.createElement("h3",null," Error getting from server");if(""!==this.props.player_name){var e="Turn of "+this.props.turn,t="Welcome ".concat(this.props.player_name);return r.a.createElement("div",null,r.a.createElement(q,{textt:e,welcome_text:t}),r.a.createElement(X,{appClick:this.appClick,values:this.props.values}),r.a.createElement("p",null,"Number of movements: ",this.props.movements),r.a.createElement("button",{onClick:this.reset},"RESET"),r.a.createElement("form",{onSubmit:this.handleGameSubmit},r.a.createElement("label",null,"Introduce your name game:",r.a.createElement("input",{type:"text",value:this.state.name_game,onChange:this.handleGameName}),r.a.createElement("input",{className:"save",type:"submit",value:"SAVE GAME"}))),r.a.createElement("button",{onClick:this.saveGame},"SAVE GAME"))}return r.a.createElement("header",null,r.a.createElement("form",{onSubmit:this.handlePlayerSubmit},r.a.createElement("label",null,"Introduce player name:",r.a.createElement("input",{type:"text",value:this.state.player_name,onChange:this.handlePlayerInputChange}),r.a.createElement("input",{className:"submit",type:"submit",value:"Submit"}))))}}]),t}(r.a.Component);var z=Object(p.c)(function(e){return console.log("mapstatetoprops"),{values:e.values,turn:e.turn,movements:e.movements,fetch:e.fetch,player_name:e.player_name,router:e.router.location.pathname}})($),K=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"frontbody"},"Hello this is the home page")}}]),t}(r.a.Component),Q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={APILIST:g},n.load=n.load.bind(Object(Y.a)(n)),n.deleteAll=n.deleteAll.bind(Object(Y.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"load",value:function(e){console.log("load"),this.props.loadGame(e.uri)}},{key:"delete",value:function(e){var t;console.log("delete"),g.forEach(function(n,a){e.name===n.name&&(t=a)}),g.splice(t,1),this.setState(g)}},{key:"deleteAll",value:function(){g.splice(0,g.length),this.setState(g)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,g.map(function(t,n){return r.a.createElement("div",{key:"item"+n},t.name," :",r.a.createElement(U.a,{to:"/continue/".concat(t.name),pepe:"pepe"}," CONTINUE "),r.a.createElement("button",{onClick:function(){return e.delete(t)}}," DELETE "))}),r.a.createElement("button",{onClick:function(){return e.deleteAll()}}," DELETE ALL"))}}]),t}(r.a.Component),Z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={showGame:!1,uri:""},n.loadGame=n.loadGame.bind(Object(Y.a)(n)),n.deleteGame=n.deleteGame.bind(Object(Y.a)(n)),console.log(n.props),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"saveMatch",value:function(){var e=Object(I.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={values:this.props.values,turn:this.props.turn,player_name:this.state.player_name},e.next=3,L(t);case 3:n=e.sent,console.log(n),k(n.uri);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadGame",value:function(e){console.log("loading"),console.log(e),this.setState({showGame:!0,uri:e})}},{key:"deleteGame",value:function(e){console.log("deleting")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"List of games saved:"),r.a.createElement(Q,{loadGame:this.loadGame,deleteGame:this.deleteGame}))}}]),t}(r.a.Component),ee=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(M.a,{exact:!0,path:"/",component:K}),r.a.createElement(M.a,{path:"/new",component:z}),r.a.createElement(M.a,{exact:!0,path:"/continue/(:id)",component:function(){return r.a.createElement(z,{continue:!1})}}),r.a.createElement(M.a,{path:"/continue",component:function(){return r.a.createElement(z,{continue:!0})}}),r.a.createElement(M.a,{path:"/savedGames",component:Z}))}}]),t}(r.a.Component),te=n(35),ne=Object(T.a)(),ae=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).initialState={values:d,turn:f,movements:0},n.store=Object(m.e)(Object(_.b)(ne)(x),n.initialState,Object(m.d)(Object(m.a)(Object(H.a)(ne),te.a))),n.store.subscribe(function(){var e=n.store.getState();n.checkWinner(e.values,e.turn)}),console.log("REDUX PROVIDER"),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"checkWinner",value:function(e,t){var n=this,a=this.checkColumn(e),r=this.checkRow(e),o=this.checkDiagonal(e),c=this.isFinish(e);if(a||r||o)return alert("".concat(t===f?v:f," won.")),void setTimeout(function(){n.store.dispatch(P())},2e3);c&&(alert("Equals, restarting the game..."),setTimeout(function(){n.store.dispatch(P())},2e3))}},{key:"checkColumn",value:function(e){for(var t=!1,n=0;n<e[n].length&&(this.getCol(e,n)&&(t=!0),e[n+1]);n++);return t}},{key:"checkRow",value:function(e){var t=this,n=!1;return e.forEach(function(e){t.checkArray(e)&&(n=!0)}),n}},{key:"checkDiagonal",value:function(e){return this.getDiagonal(e)}},{key:"getCol",value:function(e,t){for(var n=[],a=0;a<e.length;a++)n.push(e[a][t]);return this.checkArray(n)}},{key:"getDiagonal",value:function(e){for(var t=this,n=[],a=[],r=[],o=!1,c=0,i=0;c<e[c].length&&(n.push(e[c][i]),e[c+1]);c++,i++);for(var l=0,s=e[0].length;s>0;l++,s--)a.push(e[l][s-1]);return r.push(n,a),r.forEach(function(e){t.checkArray(e)&&(o=!0)}),o}},{key:"checkArray",value:function(e){for(var t=!0,n=0;n<e.length-1;n++)"-"!==e[n]&&e[n]===e[n+1]||(t=!1);return t}},{key:"isFinish",value:function(e){var t=!0;return e.forEach(function(e){e.forEach(function(e){"-"===e&&(t=!1)})}),t}},{key:"render",value:function(){return r.a.createElement(p.a,{store:this.store},r.a.createElement(_.a,{history:ne},r.a.createElement("div",{style:{height:"100%",textAlign:"center"}},r.a.createElement(W,null),r.a.createElement(ee,null))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.4d779f3e.chunk.js.map